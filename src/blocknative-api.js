"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(r,!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",reIsUint=/^(?:0|[1-9]\d*)$/;function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeMax=Math.max;function arrayLikeKeys(e,t){var r=isArray(e)||isArguments(e)?baseTimes(e.length,String):[],n=r.length,a=!!n;for(var o in e)!t&&!hasOwnProperty.call(e,o)||a&&("length"==o||isIndex(o,n))||r.push(o);return r}function assignInDefaults(e,t,r,n){return void 0===e||eq(e,objectProto[r])&&!hasOwnProperty.call(n,r)?t:e}function assignValue(e,t,r){var n=e[t];hasOwnProperty.call(e,t)&&eq(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function baseKeysIn(e){if(!isObject(e))return nativeKeysIn(e);var t=isPrototype(e),r=[];for(var n in e)("constructor"!=n||!t&&hasOwnProperty.call(e,n))&&r.push(n);return r}function baseRest(e,t){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,a=nativeMax(r.length-t,0),o=Array(a);++n<a;)o[n]=r[t+n];n=-1;for(var i=Array(t+1);++n<t;)i[n]=r[n];return i[t]=o,apply(e,this,i)}}function copyObject(e,t,r,n){r||(r={});for(var a=-1,o=t.length;++a<o;){var i=t[a],s=n?n(r[i],e[i],i,r,e):void 0;assignValue(r,i,void 0===s?e[i]:s)}return r}function createAssigner(e){return baseRest(function(t,r){var n=-1,a=r.length,o=a>1?r[a-1]:void 0,i=a>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(a--,o):void 0,i&&isIterateeCall(r[0],r[1],i)&&(o=a<3?void 0:o,a=1),t=Object(t);++n<a;){var s=r[n];s&&e(t,s,n,o)}return t})}function isIndex(e,t){return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==typeof e||reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function isIterateeCall(e,t,r){if(!isObject(r))return!1;var n=typeof t;return!!("number"==n?isArrayLike(r)&&isIndex(t,r.length):"string"==n&&t in r)&&eq(r[t],e)}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto)}function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}function eq(e,t){return e===t||e!=e&&t!=t}function isArguments(e){return isArrayLikeObject(e)&&hasOwnProperty.call(e,"callee")&&(!propertyIsEnumerable.call(e,"callee")||objectToString.call(e)==argsTag)}var isArray=Array.isArray;function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}var assignInWith=createAssigner(function(e,t,r,n){copyObject(t,keysIn(t),e,n)}),defaults=baseRest(function(e){return e.push(void 0,assignInDefaults),apply(assignInWith,void 0,e)});function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var lodash_defaults=defaults,dist=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t,r,n){if(this.url=t,this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.ondown=null,this.onreopen=null,this.CONNECTING=e.CONNECTING,this.OPEN=e.OPEN,this.CLOSING=e.CLOSING,this.CLOSED=e.CLOSED,this.hasBeenOpened=!1,this.isClosed=!1,this.messageBuffer=[],this.nextRetryTime=0,this.reconnectCount=0,this.lastKnownExtensions="",this.lastKnownProtocol="",this.listeners={},null==r||"string"==typeof r||Array.isArray(r)?this.protocols=r:n=r,this.options=lodash_defaults({},n,e.DEFAULT_OPTIONS),!this.options.wsConstructor){if("undefined"==typeof WebSocket)throw new Error("WebSocket not present in global scope and no wsConstructor option was provided.");this.options.wsConstructor=WebSocket}this.openNewWebSocket()}return Object.defineProperty(e.prototype,"binaryType",{get:function(){return this.binaryTypeInternal||"blob"},set:function(e){this.binaryTypeInternal=e,this.ws&&(this.ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){var e=this.ws?this.ws.bufferedAmount:0,t=!1;return this.messageBuffer.forEach(function(r){var n=function(e){return"string"==typeof e?2*e.length:e instanceof ArrayBuffer?e.byteLength:e instanceof Blob?e.size:void 0}(r);null!=n?e+=n:t=!0}),t&&this.debugLog("Some buffered data had unknown length. bufferedAmount() return value may be below the correct amount."),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this.ws?this.ws.extensions:this.lastKnownExtensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this.ws?this.ws.protocol:this.lastKnownProtocol},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this.isClosed?e.CLOSED:e.OPEN},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){this.ws&&this.ws.close(e,t),this.shutdown(),this.debugLog("WebSocket permanently closed by client.")},e.prototype.send=function(e){this.ws&&this.ws.readyState===this.OPEN?this.ws.send(e):this.messageBuffer.push(e)},e.prototype.addEventListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.dispatchEvent=function(e){return this.dispatchEventOfType(e.type,e)},e.prototype.removeEventListener=function(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(function(e){return e!==t}))},e.prototype.openNewWebSocket=function(){var e=this;if(!this.isClosed){var t=this.options,r=t.connectTimeout,n=t.wsConstructor;this.debugLog("Opening new WebSocket to "+this.url+".");var a=new n(this.url,this.protocols);a.onclose=function(t){return e.handleClose(t)},a.onerror=function(t){return e.handleError(t)},a.onmessage=function(t){return e.handleMessage(t)},a.onopen=function(t){return e.handleOpen(t)},this.connectTimeoutId=setTimeout(function(){e.clearConnectTimeout(),a.close()},r),this.ws=a}},e.prototype.handleOpen=function(e){var t=this;if(this.ws&&!this.isClosed){var r=this.options.allClearResetTime;this.debugLog("WebSocket opened."),null!=this.binaryTypeInternal?this.ws.binaryType=this.binaryTypeInternal:this.binaryTypeInternal=this.ws.binaryType,this.clearConnectTimeout(),this.hasBeenOpened?this.dispatchEventOfType("reopen",e):(this.dispatchEventOfType("open",e),this.hasBeenOpened=!0),this.messageBuffer.forEach(function(e){return t.send(e)}),this.messageBuffer=[],this.allClearTimeoutId=setTimeout(function(){t.clearAllClearTimeout(),t.nextRetryTime=0,t.reconnectCount=0;var e=r/1e3|0;t.debugLog("WebSocket remained open for "+e+" seconds. Resetting retry time and count.")},r)}},e.prototype.handleMessage=function(e){this.isClosed||this.dispatchEventOfType("message",e)},e.prototype.handleClose=function(e){var t=this;if(!this.isClosed){var r=this.options,n=r.maxReconnectAttempts,a=r.shouldReconnect;if(this.clearConnectTimeout(),this.clearAllClearTimeout(),this.ws&&(this.lastKnownExtensions=this.ws.extensions,this.lastKnownProtocol=this.ws.protocol,this.ws=void 0),this.dispatchEventOfType("down",e),this.reconnectCount>=n)this.stopReconnecting(e,this.getTooManyFailedReconnectsMessage());else{var o=a(e);"boolean"==typeof o?this.handleWillReconnect(o,e,"Provided shouldReconnect() returned false. Closing permanently."):o.then(function(r){t.isClosed||t.handleWillReconnect(r,e,"Provided shouldReconnect() resolved to false. Closing permanently.")})}}},e.prototype.handleError=function(e){this.dispatchEventOfType("error",e),this.debugLog("WebSocket encountered an error.")},e.prototype.handleWillReconnect=function(e,t,r){e?this.reconnect():this.stopReconnecting(t,r)},e.prototype.reconnect=function(){var e=this,t=this.options,r=t.minReconnectDelay,n=t.maxReconnectDelay,a=t.reconnectBackoffFactor;this.reconnectCount++;var o=this.nextRetryTime;this.nextRetryTime=Math.max(r,Math.min(this.nextRetryTime*a,n)),setTimeout(function(){return e.openNewWebSocket()},o);var i=o/1e3|0;this.debugLog("WebSocket was closed. Re-opening in "+i+" seconds.")},e.prototype.stopReconnecting=function(e,t){this.debugLog(t),this.shutdown(),this.dispatchEventOfType("close",e)},e.prototype.shutdown=function(){this.isClosed=!0,this.clearAllTimeouts(),this.messageBuffer=[]},e.prototype.clearAllTimeouts=function(){this.clearConnectTimeout(),this.clearAllClearTimeout()},e.prototype.clearConnectTimeout=function(){null!=this.connectTimeoutId&&(clearTimeout(this.connectTimeoutId),this.connectTimeoutId=void 0)},e.prototype.clearAllClearTimeout=function(){null!=this.allClearTimeoutId&&(clearTimeout(this.allClearTimeoutId),this.allClearTimeoutId=void 0)},e.prototype.dispatchEventOfType=function(e,t){var r=this;switch(e){case"close":this.onclose&&this.onclose(t);break;case"error":this.onerror&&this.onerror(t);break;case"message":this.onmessage&&this.onmessage(t);break;case"open":this.onopen&&this.onopen(t);break;case"down":this.ondown&&this.ondown(t);break;case"reopen":this.onreopen&&this.onreopen(t)}return e in this.listeners&&this.listeners[e].slice().forEach(function(e){return r.callListener(e,t)}),!t||!t.defaultPrevented},e.prototype.callListener=function(e,t){"function"==typeof e?e.call(this,t):e.handleEvent.call(this,t)},e.prototype.debugLog=function(e){this.options.debug&&console.log(e)},e.prototype.getTooManyFailedReconnectsMessage=function(){var e,t=this.options.maxReconnectAttempts;return"Failed to reconnect after "+t+" "+(e="attempt",1===t?e:e+"s")+". Closing permanently."},e.DEFAULT_OPTIONS={allClearResetTime:5e3,connectTimeout:5e3,debug:!1,minReconnectDelay:1e3,maxReconnectDelay:3e4,maxReconnectAttempts:Number.POSITIVE_INFINITY,reconnectBackoffFactor:1.5,shouldReconnect:function(){return!0},wsConstructor:void 0},e.CONNECTING=0,e.OPEN=1,e.CLOSING=2,e.CLOSED=3,e}();t.default=r}),SturdyWebSocket=unwrapExports(dist),require$$0={},maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(e){throw new RangeError(errors[e])}function map(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function mapDomain(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+map((e=e.replace(regexSeparators,".")).split("."),t).join(".")}function ucs2decode(e){for(var t,r,n=[],a=0,o=e.length;a<o;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<o?56320==(64512&(r=e.charCodeAt(a++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),a--):n.push(t);return n}function digitToBasic(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function adapt(e,t,r){var n=0;for(e=r?floor(e/damp):e>>1,e+=floor(e/t);e>baseMinusTMin*tMax>>1;n+=base)e=floor(e/baseMinusTMin);return floor(n+(baseMinusTMin+1)*e/(e+skew))}function encode(e){var t,r,n,a,o,i,s,c,l,u,d,f,h,p,g,y=[];for(f=(e=ucs2decode(e)).length,t=initialN,r=0,o=initialBias,i=0;i<f;++i)(d=e[i])<128&&y.push(stringFromCharCode(d));for(n=a=y.length,a&&y.push(delimiter);n<f;){for(s=maxInt,i=0;i<f;++i)(d=e[i])>=t&&d<s&&(s=d);for(s-t>floor((maxInt-r)/(h=n+1))&&error("overflow"),r+=(s-t)*h,t=s,i=0;i<f;++i)if((d=e[i])<t&&++r>maxInt&&error("overflow"),d==t){for(c=r,l=base;!(c<(u=l<=o?tMin:l>=o+tMax?tMax:l-o));l+=base)g=c-u,p=base-u,y.push(stringFromCharCode(digitToBasic(u+g%p,0))),c=floor(g/p);y.push(stringFromCharCode(digitToBasic(c,0))),o=adapt(r,h,n==a),r=0,++n}++r,++t}return y.join("")}function toASCII(e){return mapDomain(e,function(e){return regexNonASCII.test(e)?"xn--"+encode(e):e})}global.setTimeout,global.clearTimeout;var performance=global.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isString(e){return"string"==typeof e}function isObject$1(e){return"object"==typeof e&&null!==e}function hasOwnProperty$1(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var isArray$1=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function stringifyPrimitive(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function stringify(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?map$1(objectKeys(e),function(n){var a=encodeURIComponent(stringifyPrimitive(n))+r;return isArray$1(e[n])?map$1(e[n],function(e){return a+encodeURIComponent(stringifyPrimitive(e))}).join(t):a+encodeURIComponent(stringifyPrimitive(e[n]))}).join(t):n?encodeURIComponent(stringifyPrimitive(n))+r+encodeURIComponent(stringifyPrimitive(e)):""}function map$1(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var objectKeys=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function parse(e,t,r,n){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var o=/\+/g;e=e.split(t);var i=1e3;n&&"number"==typeof n.maxKeys&&(i=n.maxKeys);var s=e.length;i>0&&s>i&&(s=i);for(var c=0;c<s;++c){var l,u,d,f,h=e[c].replace(o,"%20"),p=h.indexOf(r);p>=0?(l=h.substr(0,p),u=h.substr(p+1)):(l=h,u=""),d=decodeURIComponent(l),f=decodeURIComponent(u),hasOwnProperty$1(a,d)?isArray$1(a[d])?a[d].push(f):a[d]=[a[d],f]:a[d]=f}return a}var require$$1={parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject,format:urlFormat,Url:Url};function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(e,t,r){if(e&&isObject$1(e)&&e instanceof Url)return e;var n=new Url;return n.parse(e,t,r),n}function parse$1(e,t,r,n){if(!isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var a=t.indexOf("?"),o=-1!==a&&a<t.indexOf("#")?"?":"#",i=t.split(o);i[0]=i[0].replace(/\\/g,"/");var s=t=i.join(o);if(s=s.trim(),!n&&1===t.split("#").length){var c=simplePathPattern.exec(s);if(c)return e.path=s,e.href=s,e.pathname=c[1],c[2]?(e.search=c[2],e.query=r?parse(e.search.substr(1)):e.search.substr(1)):r&&(e.search="",e.query={}),e}var l,u,d,f,h=protocolPattern.exec(s);if(h){var p=(h=h[0]).toLowerCase();e.protocol=p,s=s.substr(h.length)}if(n||h||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===s.substr(0,2);!g||h&&hostlessProtocol[h]||(s=s.substr(2),e.slashes=!0)}if(!hostlessProtocol[h]&&(g||h&&!slashedProtocol[h])){var y,m,v=-1;for(l=0;l<hostEndingChars.length;l++)-1!==(u=s.indexOf(hostEndingChars[l]))&&(-1===v||u<v)&&(v=u);for(-1!==(m=-1===v?s.lastIndexOf("@"):s.lastIndexOf("@",v))&&(y=s.slice(0,m),s=s.slice(m+1),e.auth=decodeURIComponent(y)),v=-1,l=0;l<nonHostChars.length;l++)-1!==(u=s.indexOf(nonHostChars[l]))&&(-1===v||u<v)&&(v=u);-1===v&&(v=s.length),e.host=s.slice(0,v),s=s.slice(v),parseHost(e),e.hostname=e.hostname||"";var b="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!b){var O=e.hostname.split(/\./);for(l=0,d=O.length;l<d;l++){var _=O[l];if(_&&!_.match(hostnamePartPattern)){for(var $="",P=0,w=_.length;P<w;P++)_.charCodeAt(P)>127?$+="x":$+=_[P];if(!$.match(hostnamePartPattern)){var j=O.slice(0,l),x=O.slice(l+1),E=_.match(hostnamePartStart);E&&(j.push(E[1]),x.unshift(E[2])),x.length&&(s="/"+x.join(".")+s),e.hostname=j.join(".");break}}}}e.hostname.length>hostnameMaxLen?e.hostname="":e.hostname=e.hostname.toLowerCase(),b||(e.hostname=toASCII(e.hostname)),f=e.port?":"+e.port:"";var S=e.hostname||"";e.host=S+f,e.href+=e.host,b&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!unsafeProtocol[p])for(l=0,d=autoEscape.length;l<d;l++){var A=autoEscape[l];if(-1!==s.indexOf(A)){var k=encodeURIComponent(A);k===A&&(k=escape(A)),s=s.split(A).join(k)}}var T=s.indexOf("#");-1!==T&&(e.hash=s.substr(T),s=s.slice(0,T));var I=s.indexOf("?");if(-1!==I?(e.search=s.substr(I),e.query=s.substr(I+1),r&&(e.query=parse(e.query)),s=s.slice(0,I)):r&&(e.search="",e.query={}),s&&(e.pathname=s),slashedProtocol[p]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){f=e.pathname||"";var M=e.search||"";e.path=f+M}return e.href=format(e),e}function urlFormat(e){return isString(e)&&(e=parse$1({},e)),format(e)}function format(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",a=e.hash||"",o=!1,i="";e.host?o=t+e.host:e.hostname&&(o=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(o+=":"+e.port)),e.query&&isObject$1(e.query)&&Object.keys(e.query).length&&(i=stringify(e.query));var s=e.search||i&&"?"+i||"";return r&&":"!==r.substr(-1)&&(r+=":"),e.slashes||(!r||slashedProtocol[r])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),a&&"#"!==a.charAt(0)&&(a="#"+a),s&&"?"!==s.charAt(0)&&(s="?"+s),r+o+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+a}function urlResolve(e,t){return urlParse(e,!1,!0).resolve(t)}function urlResolveObject(e,t){return e?urlParse(e,!1,!0).resolveObject(t):t}function parseHost(e){var t=e.host,r=portPattern.exec(t);r&&(":"!==(r=r[0])&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}Url.prototype.parse=function(e,t,r){return parse$1(this,e,t,r)},Url.prototype.format=function(){return format(this)},Url.prototype.resolve=function(e){return this.resolveObject(urlParse(e,!1,!0)).format()},Url.prototype.resolveObject=function(e){if(isString(e)){var t=new Url;t.parse(e,!1,!0),e=t}for(var r,n=new Url,a=Object.keys(this),o=0;o<a.length;o++){var i=a[o];n[i]=this[i]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),c=0;c<s.length;c++){var l=s[c];"protocol"!==l&&(n[l]=e[l])}return slashedProtocol[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!slashedProtocol[e.protocol]){for(var u=Object.keys(e),d=0;d<u.length;d++){var f=u[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||hostlessProtocol[e.protocol])n.pathname=e.pathname;else{for(r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var h=n.pathname||"",p=n.search||"";n.path=h+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g,y=n.pathname&&"/"===n.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=m||y||n.host&&e.pathname,b=v,O=n.pathname&&n.pathname.split("/")||[],_=n.protocol&&!slashedProtocol[n.protocol];if(r=e.pathname&&e.pathname.split("/")||[],_&&(n.hostname="",n.port=null,n.host&&(""===O[0]?O[0]=n.host:O.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),v=v&&(""===r[0]||""===O[0])),m)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,O=r;else if(r.length)O||(O=[]),O.pop(),O=O.concat(r),n.search=e.search,n.query=e.query;else if(!isNullOrUndefined(e.search))return _&&(n.hostname=n.host=O.shift(),(g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=g.shift(),n.host=n.hostname=g.shift())),n.search=e.search,n.query=e.query,isNull(n.pathname)&&isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!O.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var $=O.slice(-1)[0],P=(n.host||e.host||O.length>1)&&("."===$||".."===$)||""===$,w=0,j=O.length;j>=0;j--)"."===($=O[j])?O.splice(j,1):".."===$?(O.splice(j,1),w++):w&&(O.splice(j,1),w--);if(!v&&!b)for(;w--;w)O.unshift("..");!v||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),P&&"/"!==O.join("/").substr(-1)&&O.push("");var x=""===O[0]||O[0]&&"/"===O[0].charAt(0);return _&&(n.hostname=n.host=x?"":O.length?O.shift():"",(g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=g.shift(),n.host=n.hostname=g.shift())),(v=v||n.host&&O.length)&&!x&&O.unshift(""),O.length?n.pathname=O.join("/"):(n.pathname=null,n.path=null),isNull(n.pathname)&&isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},Url.prototype.parseHost=function(){return parseHost(this)};var source=createCommonjsModule(function(e){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(1)),o=r(8),i=r(2),s=r(16);t.validatorSymbol=Symbol("validators"),t.Predicate=class{constructor(e,t={}){this.type=e,this.options=t,this.context={validators:[]},this.context=Object.assign({},this.context,this.options);const r=this.type[0].toLowerCase()+this.type.slice(1);this.addValidator({message:(e,t)=>`Expected ${t&&t.substring(this.type.length+1)||"argument"} to be of type \`${this.type}\` but received type \`${a.default(e)}\``,validator:e=>a.default[r](e)})}[i.testSymbol](e,t,r){for(const{validator:n,message:a}of this.context.validators){if(!0===this.options.optional&&void 0===e)continue;const i=n(e);if(!0===i)continue;let s=r;throw"function"==typeof r&&(s=r()),s=s?`${this.type} \`${s}\``:this.type,new o.ArgumentError(a(e,s,i),t)}}get[t.validatorSymbol](){return this.context.validators}get not(){return s.not(this)}validate(e){return this.addValidator({message:(e,t,r)=>"string"==typeof r?`(${t}) ${r}`:r(t),validator:t=>{const{message:r,validator:n}=e(t);return!!n||r}})}is(e){return this.addValidator({message:(e,t,r)=>r?`(${t}) ${r}`:`Expected ${t} \`${e}\` to pass custom validation function`,validator:e})}addValidator(e){return this.context.validators.push(e),this}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof URL?r(15).URL:URL,{toString:a}=Object.prototype,o=e=>t=>typeof t===e,i=e=>{const t=a.call(e).slice(8,-1);if(t)return t},s=e=>t=>i(t)===e;function c(e){switch(e){case null:return"null";case!0:case!1:return"boolean"}switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"bigint":return"bigint";case"symbol":return"symbol"}if(c.function_(e))return"Function";if(c.observable(e))return"Observable";if(c.array(e))return"Array";if(c.buffer(e))return"Buffer";const t=i(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}const l=e=>"object"==typeof e;c.undefined=o("undefined"),c.string=o("string"),c.number=o("number"),c.bigint=o("bigint"),c.function_=o("function"),c.null_=e=>null===e,c.class_=e=>c.function_(e)&&e.toString().startsWith("class "),c.boolean=e=>!0===e||!1===e,c.symbol=o("symbol"),c.numericString=e=>c.string(e)&&e.length>0&&!Number.isNaN(Number(e)),c.array=Array.isArray,c.buffer=e=>!c.nullOrUndefined(e)&&!c.nullOrUndefined(e.constructor)&&c.function_(e.constructor.isBuffer)&&e.constructor.isBuffer(e),c.nullOrUndefined=e=>c.null_(e)||c.undefined(e),c.object=e=>!c.nullOrUndefined(e)&&(c.function_(e)||l(e)),c.iterable=e=>!c.nullOrUndefined(e)&&c.function_(e[Symbol.iterator]),c.asyncIterable=e=>!c.nullOrUndefined(e)&&c.function_(e[Symbol.asyncIterator]),c.generator=e=>c.iterable(e)&&c.function_(e.next)&&c.function_(e.throw),c.nativePromise=e=>s("Promise")(e),c.promise=e=>c.nativePromise(e)||(e=>!c.null_(e)&&l(e)&&c.function_(e.then)&&c.function_(e.catch))(e),c.generatorFunction=s("GeneratorFunction"),c.asyncFunction=s("AsyncFunction"),c.boundFunction=e=>c.function_(e)&&!e.hasOwnProperty("prototype"),c.regExp=s("RegExp"),c.date=s("Date"),c.error=s("Error"),c.map=e=>s("Map")(e),c.set=e=>s("Set")(e),c.weakMap=e=>s("WeakMap")(e),c.weakSet=e=>s("WeakSet")(e),c.int8Array=s("Int8Array"),c.uint8Array=s("Uint8Array"),c.uint8ClampedArray=s("Uint8ClampedArray"),c.int16Array=s("Int16Array"),c.uint16Array=s("Uint16Array"),c.int32Array=s("Int32Array"),c.uint32Array=s("Uint32Array"),c.float32Array=s("Float32Array"),c.float64Array=s("Float64Array"),c.bigint64Array=s("BigInt64Array"),c.biguint64Array=s("BigUint64Array"),c.arrayBuffer=s("ArrayBuffer"),c.sharedArrayBuffer=s("SharedArrayBuffer"),c.dataView=s("DataView"),c.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype,c.urlInstance=e=>s("URL")(e),c.urlString=e=>{if(!c.string(e))return!1;try{return new n(e),!0}catch(e){return!1}},c.truthy=e=>Boolean(e),c.falsy=e=>!e,c.nan=e=>Number.isNaN(e);const u=new Set(["undefined","string","number","bigint","boolean","symbol"]);c.primitive=e=>c.null_(e)||u.has(typeof e),c.integer=e=>Number.isInteger(e),c.safeInteger=e=>Number.isSafeInteger(e),c.plainObject=e=>{if("Object"!==i(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.getPrototypeOf({})};const d=new Set(["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"]);c.typedArray=e=>{const t=i(e);return void 0!==t&&d.has(t)},c.arrayLike=e=>!c.nullOrUndefined(e)&&!c.function_(e)&&(e=>c.safeInteger(e)&&e>=0)(e.length),c.inRange=(e,t)=>{if(c.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(c.array(t)&&2===t.length)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)};const f=["innerHTML","ownerDocument","style","attributes","nodeValue"];c.domElement=e=>c.object(e)&&1===e.nodeType&&c.string(e.nodeName)&&!c.plainObject(e)&&f.every(t=>t in e),c.observable=e=>!!(e&&(e[Symbol.observable]&&e===e[Symbol.observable]()||e["@@observable"]&&e===e["@@observable"]())),c.nodeStream=e=>!c.nullOrUndefined(e)&&l(e)&&c.function_(e.pipe)&&!c.observable(e),c.infinite=e=>e===1/0||e===-1/0;const h=e=>t=>c.integer(t)&&Math.abs(t%2)===e;c.evenInteger=h(0),c.oddInteger=h(1),c.emptyArray=e=>c.array(e)&&0===e.length,c.nonEmptyArray=e=>c.array(e)&&e.length>0,c.emptyString=e=>c.string(e)&&0===e.length,c.nonEmptyString=e=>c.string(e)&&e.length>0,c.emptyStringOrWhitespace=e=>c.emptyString(e)||(e=>c.string(e)&&!1===/\S/.test(e))(e),c.emptyObject=e=>c.object(e)&&!c.map(e)&&!c.set(e)&&0===Object.keys(e).length,c.nonEmptyObject=e=>c.object(e)&&!c.map(e)&&!c.set(e)&&Object.keys(e).length>0,c.emptySet=e=>c.set(e)&&0===e.size,c.nonEmptySet=e=>c.set(e)&&e.size>0,c.emptyMap=e=>c.map(e)&&0===e.size,c.nonEmptyMap=e=>c.map(e)&&e.size>0;const p=(e,t,r)=>{if(!1===c.function_(t))throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`);if(0===r.length)throw new TypeError("Invalid number of values");return e.call(r,t)};c.any=(e,...t)=>p(Array.prototype.some,e,t),c.all=(e,...t)=>p(Array.prototype.every,e,t),Object.defineProperties(c,{class:{value:c.class_},function:{value:c.function_},null:{value:c.null_}}),e.exports=c,t.default=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.testSymbol=Symbol("test"),t.isPredicate=e=>Boolean(e&&e[t.testSymbol])},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t,r=5)=>{const n=[];for(const a of t)if(!e.has(a)&&(n.push(a),n.length===r))return n;return 0===n.length||n}},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(10)),o=r(11),i=r(0);t.Predicate=i.Predicate;const s=r(2),c=n(r(17)),l=n(r(6)),u=n(r(9)),d=(e,t,r)=>{if(!s.isPredicate(t)&&"string"!=typeof t)throw new TypeError(`Expected second argument to be a predicate or a string, got \`${typeof t}\``);if(s.isPredicate(t)){const r=a.default();u.default(e,()=>o.inferLabel(r),t)}else u.default(e,t,r)};Object.defineProperties(d,{isValid:{value:(e,t)=>{try{return d(e,t),!0}catch(e){return!1}}},create:{value:(e,t)=>r=>{if(s.isPredicate(e)){const t=a.default();u.default(r,()=>o.inferLabel(t),e)}else u.default(r,e,t)}}}),t.default=l.default(c.default(d));var f=r(6);t.StringPredicate=f.StringPredicate,t.NumberPredicate=f.NumberPredicate,t.BooleanPredicate=f.BooleanPredicate,t.ArrayPredicate=f.ArrayPredicate,t.ObjectPredicate=f.ObjectPredicate,t.DatePredicate=f.DatePredicate,t.ErrorPredicate=f.ErrorPredicate,t.MapPredicate=f.MapPredicate,t.WeakMapPredicate=f.WeakMapPredicate,t.SetPredicate=f.SetPredicate,t.WeakSetPredicate=f.WeakSetPredicate,t.AnyPredicate=f.AnyPredicate},function(e,t,r){(function(e){var r="__lodash_hash_undefined__",n=1,a=2,o=9007199254740991,i="[object Arguments]",s="[object Array]",c="[object AsyncFunction]",l="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Function]",h="[object GeneratorFunction]",p="[object Map]",g="[object Number]",y="[object Null]",m="[object Object]",v="[object Proxy]",b="[object RegExp]",O="[object Set]",_="[object String]",$="[object Symbol]",P="[object Undefined]",w="[object ArrayBuffer]",j="[object DataView]",x=/^\[object .+?Constructor\]$/,E=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[i]=S[s]=S[w]=S[l]=S[j]=S[u]=S[d]=S[f]=S[p]=S[g]=S[m]=S[b]=S[O]=S[_]=S["[object WeakMap]"]=!1;var A="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,k="object"==typeof self&&self&&self.Object===Object&&self,T=A||k||Function("return this")(),I=t&&!t.nodeType&&t,M=I&&"object"==typeof e&&e&&!e.nodeType&&e,C=M&&M.exports===I,N=C&&A.process,V=function(){try{return N&&N.binding&&N.binding("util")}catch(e){}}(),R=V&&V.isTypedArray;function z(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function L(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function U(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var D,F,B,W=Array.prototype,q=Function.prototype,J=Object.prototype,K=T["__core-js_shared__"],G=q.toString,H=J.hasOwnProperty,X=(D=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"",Z=J.toString,Y=RegExp("^"+G.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Q=C?T.Buffer:void 0,ee=T.Symbol,te=T.Uint8Array,re=J.propertyIsEnumerable,ne=W.splice,ae=ee?ee.toStringTag:void 0,oe=Object.getOwnPropertySymbols,ie=Q?Q.isBuffer:void 0,se=(F=Object.keys,B=Object,function(e){return F(B(e))}),ce=Me(T,"DataView"),le=Me(T,"Map"),ue=Me(T,"Promise"),de=Me(T,"Set"),fe=Me(T,"WeakMap"),he=Me(Object,"create"),pe=Re(ce),ge=Re(le),ye=Re(ue),me=Re(de),ve=Re(fe),be=ee?ee.prototype:void 0,Oe=be?be.valueOf:void 0;function _e(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $e(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Pe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function we(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Pe;++t<r;)this.add(e[t])}function je(e){var t=this.__data__=new $e(e);this.size=t.size}function xe(e,t){for(var r=e.length;r--;)if(ze(e[r][0],t))return r;return-1}function Ee(e){return null==e?void 0===e?P:y:ae&&ae in Object(e)?function(e){var t=H.call(e,ae),r=e[ae];try{e[ae]=void 0;var n=!0}catch(e){}var a=Z.call(e);return n&&(t?e[ae]=r:delete e[ae]),a}(e):function(e){return Z.call(e)}(e)}function Se(e){return qe(e)&&Ee(e)==i}function Ae(e,t,r,o,c){return e===t||(null==e||null==t||!qe(e)&&!qe(t)?e!=e&&t!=t:function(e,t,r,o,c,f){var h=Ue(e),y=Ue(t),v=h?s:Ne(e),P=y?s:Ne(t),x=(v=v==i?m:v)==m,E=(P=P==i?m:P)==m,S=v==P;if(S&&De(e)){if(!De(t))return!1;h=!0,x=!1}if(S&&!x)return f||(f=new je),h||Je(e)?ke(e,t,r,o,c,f):function(e,t,r,o,i,s,c){switch(r){case j:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!s(new te(e),new te(t)));case l:case u:case g:return ze(+e,+t);case d:return e.name==t.name&&e.message==t.message;case b:case _:return e==t+"";case p:var f=L;case O:var h=o&n;if(f||(f=U),e.size!=t.size&&!h)return!1;var y=c.get(e);if(y)return y==t;o|=a,c.set(e,t);var m=ke(f(e),f(t),o,i,s,c);return c.delete(e),m;case $:if(Oe)return Oe.call(e)==Oe.call(t)}return!1}(e,t,v,r,o,c,f);if(!(r&n)){var A=x&&H.call(e,"__wrapped__"),k=E&&H.call(t,"__wrapped__");if(A||k){var T=A?e.value():e,I=k?t.value():t;return f||(f=new je),c(T,I,r,o,f)}}return!!S&&(f||(f=new je),function(e,t,r,a,o,i){var s=r&n,c=Te(e),l=c.length;if(l!=Te(t).length&&!s)return!1;for(var u=l;u--;){var d=c[u];if(!(s?d in t:H.call(t,d)))return!1}var f=i.get(e);if(f&&i.get(t))return f==t;var h=!0;i.set(e,t),i.set(t,e);for(var p=s;++u<l;){var g=e[d=c[u]],y=t[d];if(a)var m=s?a(y,g,d,t,e,i):a(g,y,d,e,t,i);if(!(void 0===m?g===y||o(g,y,r,a,i):m)){h=!1;break}p||(p="constructor"==d)}if(h&&!p){var v=e.constructor,b=t.constructor;v!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(h=!1)}return i.delete(e),i.delete(t),h}(e,t,r,o,c,f))}(e,t,r,o,Ae,c))}function ke(e,t,r,o,i,s){var c=r&n,l=e.length,u=t.length;if(l!=u&&!(c&&u>l))return!1;var d=s.get(e);if(d&&s.get(t))return d==t;var f=-1,h=!0,p=r&a?new we:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var g=e[f],y=t[f];if(o)var m=c?o(y,g,f,t,e,s):o(g,y,f,e,t,s);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!z(t,function(e,t){if(n=t,!p.has(n)&&(g===e||i(g,e,r,o,s)))return p.push(t);var n})){h=!1;break}}else if(g!==y&&!i(g,y,r,o,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Te(e){return function(e,t,r){var n=Ke(e);return Ue(e)?n:function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}(n,r(e))}(e,0,Ce)}function Ie(e,t){var r,n,a=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function Me(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!We(e)||(t=e,X&&X in t))&&(Fe(e)?Y:x).test(Re(e));var t}(r)?r:void 0}_e.prototype.clear=function(){this.__data__=he?he(null):{},this.size=0},_e.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},_e.prototype.get=function(e){var t=this.__data__;if(he){var n=t[e];return n===r?void 0:n}return H.call(t,e)?t[e]:void 0},_e.prototype.has=function(e){var t=this.__data__;return he?void 0!==t[e]:H.call(t,e)},_e.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=he&&void 0===t?r:t,this},$e.prototype.clear=function(){this.__data__=[],this.size=0},$e.prototype.delete=function(e){var t=this.__data__,r=xe(t,e);return!(r<0||(r==t.length-1?t.pop():ne.call(t,r,1),--this.size,0))},$e.prototype.get=function(e){var t=this.__data__,r=xe(t,e);return r<0?void 0:t[r][1]},$e.prototype.has=function(e){return xe(this.__data__,e)>-1},$e.prototype.set=function(e,t){var r=this.__data__,n=xe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Pe.prototype.clear=function(){this.size=0,this.__data__={hash:new _e,map:new(le||$e),string:new _e}},Pe.prototype.delete=function(e){var t=Ie(this,e).delete(e);return this.size-=t?1:0,t},Pe.prototype.get=function(e){return Ie(this,e).get(e)},Pe.prototype.has=function(e){return Ie(this,e).has(e)},Pe.prototype.set=function(e,t){var r=Ie(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},we.prototype.add=we.prototype.push=function(e){return this.__data__.set(e,r),this},we.prototype.has=function(e){return this.__data__.has(e)},je.prototype.clear=function(){this.__data__=new $e,this.size=0},je.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},je.prototype.get=function(e){return this.__data__.get(e)},je.prototype.has=function(e){return this.__data__.has(e)},je.prototype.set=function(e,t){var r=this.__data__;if(r instanceof $e){var n=r.__data__;if(!le||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Pe(n)}return r.set(e,t),this.size=r.size,this};var Ce=oe?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,o=[];++r<n;){var i=e[r];t(i)&&(o[a++]=i)}return o}(oe(e),function(t){return re.call(e,t)}))}:function(){return[]},Ne=Ee;function Ve(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||E.test(e))&&e>-1&&e%1==0&&e<t}function Re(e){if(null!=e){try{return G.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ze(e,t){return e===t||e!=e&&t!=t}(ce&&Ne(new ce(new ArrayBuffer(1)))!=j||le&&Ne(new le)!=p||ue&&"[object Promise]"!=Ne(ue.resolve())||de&&Ne(new de)!=O||fe&&"[object WeakMap]"!=Ne(new fe))&&(Ne=function(e){var t=Ee(e),r=t==m?e.constructor:void 0,n=r?Re(r):"";if(n)switch(n){case pe:return j;case ge:return p;case ye:return"[object Promise]";case me:return O;case ve:return"[object WeakMap]"}return t});var Le=Se(function(){return arguments}())?Se:function(e){return qe(e)&&H.call(e,"callee")&&!re.call(e,"callee")},Ue=Array.isArray,De=ie||function(){return!1};function Fe(e){if(!We(e))return!1;var t=Ee(e);return t==f||t==h||t==c||t==v}function Be(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function We(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function qe(e){return null!=e&&"object"==typeof e}var Je=R?function(e){return function(t){return e(t)}}(R):function(e){return qe(e)&&Be(e.length)&&!!S[Ee(e)]};function Ke(e){return null!=(t=e)&&Be(t.length)&&!Fe(t)?function(e,t){var r=Ue(e),n=!r&&Le(e),a=!r&&!n&&De(e),o=!r&&!n&&!a&&Je(e),i=r||n||a||o,s=i?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=s.length;for(var l in e)!t&&!H.call(e,l)||i&&("length"==l||a&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ve(l,c))||s.push(l);return s}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||J))return se(e);var t,r,n=[];for(var a in Object(e))H.call(e,a)&&"constructor"!=a&&n.push(a);return n}(e);var t}e.exports=function(e,t){return Ae(e,t)}}).call(this,r(23)(e))},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});const n=r(18);t.StringPredicate=n.StringPredicate;const a=r(20);t.NumberPredicate=a.NumberPredicate;const o=r(21);t.BooleanPredicate=o.BooleanPredicate;const i=r(0),s=r(22);t.ArrayPredicate=s.ArrayPredicate;const c=r(24);t.ObjectPredicate=c.ObjectPredicate;const l=r(29);t.DatePredicate=l.DatePredicate;const u=r(30);t.ErrorPredicate=u.ErrorPredicate;const d=r(31);t.MapPredicate=d.MapPredicate;const f=r(32);t.WeakMapPredicate=f.WeakMapPredicate;const h=r(33);t.SetPredicate=h.SetPredicate;const p=r(34);t.WeakSetPredicate=p.WeakSetPredicate;const g=r(35);t.AnyPredicate=g.AnyPredicate,t.default=(e,t)=>(Object.defineProperties(e,{string:{get:()=>new n.StringPredicate(t)},number:{get:()=>new a.NumberPredicate(t)},boolean:{get:()=>new o.BooleanPredicate(t)},undefined:{get:()=>new i.Predicate("undefined",t)},null:{get:()=>new i.Predicate("null",t)},nullOrUndefined:{get:()=>new i.Predicate("nullOrUndefined",t)},nan:{get:()=>new i.Predicate("nan",t)},symbol:{get:()=>new i.Predicate("symbol",t)},array:{get:()=>new s.ArrayPredicate(t)},object:{get:()=>new c.ObjectPredicate(t)},date:{get:()=>new l.DatePredicate(t)},error:{get:()=>new u.ErrorPredicate(t)},map:{get:()=>new d.MapPredicate(t)},weakMap:{get:()=>new f.WeakMapPredicate(t)},set:{get:()=>new h.SetPredicate(t)},weakSet:{get:()=>new p.WeakSetPredicate(t)},function:{get:()=>new i.Predicate("Function",t)},buffer:{get:()=>new i.Predicate("Buffer",t)},regExp:{get:()=>new i.Predicate("RegExp",t)},promise:{get:()=>new i.Predicate("Promise",t)},typedArray:{get:()=>new i.Predicate("TypedArray",t)},int8Array:{get:()=>new i.Predicate("Int8Array",t)},uint8Array:{get:()=>new i.Predicate("Uint8Array",t)},uint8ClampedArray:{get:()=>new i.Predicate("Uint8ClampedArray",t)},int16Array:{get:()=>new i.Predicate("Int16Array",t)},uint16Array:{get:()=>new i.Predicate("Uint16Array",t)},int32Array:{get:()=>new i.Predicate("Int32Array",t)},uint32Array:{get:()=>new i.Predicate("Uint32Array",t)},float32Array:{get:()=>new i.Predicate("Float32Array",t)},float64Array:{get:()=>new i.Predicate("Float64Array",t)},arrayBuffer:{get:()=>new i.Predicate("ArrayBuffer",t)},dataView:{get:()=>new i.Predicate("DataView",t)},iterable:{get:()=>new i.Predicate("Iterable",t)},any:{value:(...e)=>new g.AnyPredicate(e,t)}}),e)},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(4));t.default=(e,t)=>{try{for(const r of e)a.default(r,t);return!0}catch(e){return e.message}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ArgumentError=class extends Error{constructor(e,t){super(e),"captureStackTrace"in Error&&Error.captureStackTrace(this,t),this.name="ArgumentError"}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});const n=r(2);t.default=function e(t,r,a){a[n.testSymbol](t,e,r)}},function(e,t,r){const n=()=>{const e=Error.prepareStackTrace;Error.prepareStackTrace=(e,t)=>t;const t=(new Error).stack.slice(1);return Error.prepareStackTrace=e,t};e.exports=n,e.exports.default=n},function(e,t,r){var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(12)),i=a(r(13)),s=a(r(14)),c=/^.*?\((.*?)[,)]/;t.inferLabel=e=>{if(!s.default)return;const t=e[1],r=t.getFileName(),n=t.getLineNumber(),a=t.getColumnNumber();if(!r||null===n||null===a)return;let l=[];try{l=o.readFileSync(r,"utf8").split("\n")}catch(e){return}let u=l[n-1];if(!u)return;u=u.slice(a-1);const d=c.exec(u);if(!d||!d[1])return;const f=d[1];return i.default(f)||i.default(f.split(".").pop())?f:void 0}},function(e,t){e.exports=require$$0},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});const n=/^[a-z$_][a-z$_0-9]*$/i,a=new Set(["undefined","null","true","false","super","this","Infinity","NaN"]);t.default=e=>e&&!a.has(e)&&n.test(e)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=Boolean("undefined"!=typeof process&&process.versions&&process.versions.node)},function(e,t){e.exports=require$$1},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});const n=r(0);t.not=e=>{const t=e.addValidator;return e.addValidator=r=>{const a=r.validator,o=r.message;return r.message=(e,t)=>`[NOT] ${o(e,t)}`,r.validator=e=>!a(e),e[n.validatorSymbol].push(r),e.addValidator=t,e},e}},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(6));t.default=e=>(Object.defineProperties(e,{optional:{get:()=>a.default({},{optional:!0})}}),e)},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(1)),o=n(r(19)),i=r(0);t.StringPredicate=class extends i.Predicate{constructor(e){super("string",e)}length(e){return this.addValidator({message:(t,r)=>`Expected ${r} to have length \`${e}\`, got \`${t}\``,validator:t=>t.length===e})}minLength(e){return this.addValidator({message:(t,r)=>`Expected ${r} to have a minimum length of \`${e}\`, got \`${t}\``,validator:t=>t.length>=e})}maxLength(e){return this.addValidator({message:(t,r)=>`Expected ${r} to have a maximum length of \`${e}\`, got \`${t}\``,validator:t=>t.length<=e})}matches(e){return this.addValidator({message:(t,r)=>`Expected ${r} to match \`${e}\`, got \`${t}\``,validator:t=>e.test(t)})}startsWith(e){return this.addValidator({message:(t,r)=>`Expected ${r} to start with \`${e}\`, got \`${t}\``,validator:t=>t.startsWith(e)})}endsWith(e){return this.addValidator({message:(t,r)=>`Expected ${r} to end with \`${e}\`, got \`${t}\``,validator:t=>t.endsWith(e)})}includes(e){return this.addValidator({message:(t,r)=>`Expected ${r} to include \`${e}\`, got \`${t}\``,validator:t=>t.includes(e)})}oneOf(e){return this.addValidator({message:(t,r)=>{let n=JSON.stringify(e);if(e.length>10){const t=e.length-10;n=JSON.stringify(e.slice(0,10)).replace(/]$/,`,…+${t} more]`)}return`Expected ${r} to be one of \`${n}\`, got \`${t}\``},validator:t=>e.includes(t)})}get empty(){return this.addValidator({message:(e,t)=>`Expected ${t} to be empty, got \`${e}\``,validator:e=>""===e})}get nonEmpty(){return this.addValidator({message:(e,t)=>`Expected ${t} to not be empty`,validator:e=>""!==e})}equals(e){return this.addValidator({message:(t,r)=>`Expected ${r} to be equal to \`${e}\`, got \`${t}\``,validator:t=>t===e})}get alphanumeric(){return this.addValidator({message:(e,t)=>`Expected ${t} to be alphanumeric, got \`${e}\``,validator:e=>/^[a-z\d]+$/i.test(e)})}get alphabetical(){return this.addValidator({message:(e,t)=>`Expected ${t} to be alphabetical, got \`${e}\``,validator:e=>/^[a-z]+$/gi.test(e)})}get numeric(){return this.addValidator({message:(e,t)=>`Expected ${t} to be numeric, got \`${e}\``,validator:e=>/^(\+|-)?\d+$/i.test(e)})}get date(){return this.addValidator({message:(e,t)=>`Expected ${t} to be a date, got \`${e}\``,validator:o.default})}get lowercase(){return this.addValidator({message:(e,t)=>`Expected ${t} to be lowercase, got \`${e}\``,validator:e=>""!==e.trim()&&e===e.toLowerCase()})}get uppercase(){return this.addValidator({message:(e,t)=>`Expected ${t} to be uppercase, got \`${e}\``,validator:e=>""!==e.trim()&&e===e.toUpperCase()})}get url(){return this.addValidator({message:(e,t)=>`Expected ${t} to be a URL, got \`${e}\``,validator:a.default.urlString})}}},function(e,t,r){e.exports=function(e){return!isNaN(Date.parse(e))}},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(1)),o=r(0);t.NumberPredicate=class extends o.Predicate{constructor(e){super("number",e)}inRange(e,t){return this.addValidator({message:(r,n)=>`Expected ${n} to be in range [${e}..${t}], got ${r}`,validator:r=>a.default.inRange(r,[e,t])})}greaterThan(e){return this.addValidator({message:(t,r)=>`Expected ${r} to be greater than ${e}, got ${t}`,validator:t=>t>e})}greaterThanOrEqual(e){return this.addValidator({message:(t,r)=>`Expected ${r} to be greater than or equal to ${e}, got ${t}`,validator:t=>t>=e})}lessThan(e){return this.addValidator({message:(t,r)=>`Expected ${r} to be less than ${e}, got ${t}`,validator:t=>t<e})}lessThanOrEqual(e){return this.addValidator({message:(t,r)=>`Expected ${r} to be less than or equal to ${e}, got ${t}`,validator:t=>t<=e})}equal(e){return this.addValidator({message:(t,r)=>`Expected ${r} to be equal to ${e}, got ${t}`,validator:t=>t===e})}oneOf(e){return this.addValidator({message:(t,r)=>{let n=JSON.stringify(e);if(e.length>10){const t=e.length-10;n=JSON.stringify(e.slice(0,10)).replace(/]$/,`,…+${t} more]`)}return`Expected ${r} to be one of \`${n}\`, got ${t}`},validator:t=>e.includes(t)})}get integer(){return this.addValidator({message:(e,t)=>`Expected ${t} to be an integer, got ${e}`,validator:e=>a.default.integer(e)})}get finite(){return this.addValidator({message:(e,t)=>`Expected ${t} to be finite, got ${e}`,validator:e=>!a.default.infinite(e)})}get infinite(){return this.addValidator({message:(e,t)=>`Expected ${t} to be infinite, got ${e}`,validator:e=>a.default.infinite(e)})}get positive(){return this.addValidator({message:(e,t)=>`Expected ${t} to be positive, got ${e}`,validator:e=>e>0})}get negative(){return this.addValidator({message:(e,t)=>`Expected ${t} to be negative, got ${e}`,validator:e=>e<0})}get integerOrInfinite(){return this.addValidator({message:(e,t)=>`Expected ${t} to be an integer or infinite, got ${e}`,validator:e=>a.default.integer(e)||a.default.infinite(e)})}get uint8(){return this.integer.inRange(0,255)}get uint16(){return this.integer.inRange(0,65535)}get uint32(){return this.integer.inRange(0,4294967295)}get int8(){return this.integer.inRange(-128,127)}get int16(){return this.integer.inRange(-32768,32767)}get int32(){return this.integer.inRange(-2147483648,2147483647)}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});const n=r(0);t.BooleanPredicate=class extends n.Predicate{constructor(e){super("boolean",e)}get true(){return this.addValidator({message:(e,t)=>`Expected ${t} to be true, got ${e}`,validator:e=>!0===e})}get false(){return this.addValidator({message:(e,t)=>`Expected ${t} to be false, got ${e}`,validator:e=>!1===e})}}},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(5)),o=n(r(4)),i=r(0);t.ArrayPredicate=class extends i.Predicate{constructor(e){super("array",e)}length(e){return this.addValidator({message:(t,r)=>`Expected ${r} to have length \`${e}\`, got \`${t.length}\``,validator:t=>t.length===e})}minLength(e){return this.addValidator({message:(t,r)=>`Expected ${r} to have a minimum length of \`${e}\`, got \`${t.length}\``,validator:t=>t.length>=e})}maxLength(e){return this.addValidator({message:(t,r)=>`Expected ${r} to have a maximum length of \`${e}\`, got \`${t.length}\``,validator:t=>t.length<=e})}startsWith(e){return this.addValidator({message:(t,r)=>`Expected ${r} to start with \`${e}\`, got \`${t[0]}\``,validator:t=>t[0]===e})}endsWith(e){return this.addValidator({message:(t,r)=>`Expected ${r} to end with \`${e}\`, got \`${t[t.length-1]}\``,validator:t=>t[t.length-1]===e})}includes(...e){return this.addValidator({message:(t,r)=>`Expected ${r} to include all elements of \`${JSON.stringify(e)}\`, got \`${JSON.stringify(t)}\``,validator:t=>e.every(e=>-1!==t.indexOf(e))})}includesAny(...e){return this.addValidator({message:(t,r)=>`Expected ${r} to include any element of \`${JSON.stringify(e)}\`, got \`${JSON.stringify(t)}\``,validator:t=>e.some(e=>-1!==t.indexOf(e))})}get empty(){return this.addValidator({message:(e,t)=>`Expected ${t} to be empty, got \`${JSON.stringify(e)}\``,validator:e=>0===e.length})}get nonEmpty(){return this.addValidator({message:(e,t)=>`Expected ${t} to not be empty`,validator:e=>e.length>0})}deepEqual(e){return this.addValidator({message:(t,r)=>`Expected ${r} to be deeply equal to \`${JSON.stringify(e)}\`, got \`${JSON.stringify(t)}\``,validator:t=>a.default(t,e)})}ofType(e){let t;return this.addValidator({message:(e,r)=>`(${r}) ${t}`,validator:r=>{try{for(const t of r)o.default(t,e);return!0}catch(e){return t=e.message,!1}}})}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(1)),o=n(r(25)),i=n(r(5)),s=r(0),c=n(r(3)),l=n(r(7)),u=n(r(27)),d=r(28);t.ObjectPredicate=class extends s.Predicate{constructor(e){super("object",e)}get plain(){return this.addValidator({message:(e,t)=>`Expected ${t} to be a plain object`,validator:e=>a.default.plainObject(e)})}get empty(){return this.addValidator({message:(e,t)=>`Expected ${t} to be empty, got \`${JSON.stringify(e)}\``,validator:e=>0===Object.keys(e).length})}get nonEmpty(){return this.addValidator({message:(e,t)=>`Expected ${t} to not be empty`,validator:e=>Object.keys(e).length>0})}valuesOfType(e){return this.addValidator({message:(e,t,r)=>`(${t}) ${r}`,validator:t=>{const r=Object.keys(t).map(e=>t[e]);return l.default(r,e)}})}deepValuesOfType(e){return this.addValidator({message:(e,t,r)=>`(${t}) ${r}`,validator:t=>u.default(t,e)})}deepEqual(e){return this.addValidator({message:(t,r)=>`Expected ${r} to be deeply equal to \`${JSON.stringify(e)}\`, got \`${JSON.stringify(t)}\``,validator:t=>i.default(t,e)})}instanceOf(e){return this.addValidator({message:(t,r)=>{let n=t.constructor.name;return n&&"Object"!==n||(n=JSON.stringify(t)),`Expected ${r} \`${n}\` to be of type \`${e.name}\``},validator:t=>t instanceof e})}hasKeys(...e){return this.addValidator({message:(e,t,r)=>`Expected ${t} to have keys \`${JSON.stringify(r)}\``,validator:t=>c.default({has:e=>o.default.has(t,e)},e)})}hasAnyKeys(...e){return this.addValidator({message:(t,r)=>`Expected ${r} to have any key of \`${JSON.stringify(e)}\``,validator:t=>e.some(e=>o.default.has(t,e))})}partialShape(e){return this.addValidator({message:(e,t,r)=>`${r.replace("Expected","Expected property")} in ${t}`,validator:t=>d.partial(t,e)})}exactShape(e){return this.addValidator({message:(e,t,r)=>`${r.replace("Expected","Expected property")} in ${t}`,validator:t=>d.exact(t,e)})}}},function(e,t,r){const n=r(26);function a(e){const t=e.split("."),r=[];for(let e=0;e<t.length;e++){let n=t[e];for(;"\\"===n[n.length-1]&&void 0!==t[e+1];)n=n.slice(0,-1)+".",n+=t[++e];r.push(n)}return r}e.exports={get(e,t,r){if(!n(e)||"string"!=typeof t)return void 0===r?e:r;const o=a(t);for(let t=0;t<o.length;t++){if(!Object.prototype.propertyIsEnumerable.call(e,o[t]))return r;if(null==(e=e[o[t]])){if(t!==o.length-1)return r;break}}return e},set(e,t,r){if(!n(e)||"string"!=typeof t)return e;const o=e,i=a(t);for(let t=0;t<i.length;t++){const a=i[t];n(e[a])||(e[a]={}),t===i.length-1&&(e[a]=r),e=e[a]}return o},delete(e,t){if(!n(e)||"string"!=typeof t)return;const r=a(t);for(let t=0;t<r.length;t++){const a=r[t];if(t===r.length-1)return void delete e[a];if(e=e[a],!n(e))return}},has(e,t){if(!n(e)||"string"!=typeof t)return!1;const r=a(t);for(let t=0;t<r.length;t++){if(!n(e))return!1;if(!(r[t]in e))return!1;e=e[r[t]]}return!0}}},function(e,t,r){e.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(1)),o=n(r(4)),i=(e,t)=>a.default.plainObject(e)?Object.keys(e).every(r=>i(e[r],t)):(o.default(e,t),!0);t.default=(e,t)=>{try{return i(e,t)}catch(e){return e.message}}},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(1)),o=n(r(9)),i=r(2);t.partial=function e(t,r,n){try{for(const s of Object.keys(r)){const c=n?`${n}.${s}`:s;if(i.isPredicate(r[s]))o.default(t[s],c,r[s]);else if(a.default.plainObject(r[s])){const n=e(t[s],r[s],c);if(!0!==n)return n}}return!0}catch(e){return e.message}},t.exact=function e(t,r,n){try{const s=new Set(Object.keys(t));for(const c of Object.keys(r)){s.delete(c);const l=n?`${n}.${c}`:c;if(i.isPredicate(r[c]))o.default(t[c],l,r[c]);else if(a.default.plainObject(r[c])){if(!Object.prototype.hasOwnProperty.call(t,c))return`Expected \`${l}\` to exist`;const n=e(t[c],r[c],l);if(!0!==n)return n}}if(s.size>0){const e=Array.from(s.keys())[0];return`Did not expect property \`${n?`${n}.${e}`:e}\` to exist, got \`${t[e]}\``}return!0}catch(e){return e.message}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});const n=r(0);t.DatePredicate=class extends n.Predicate{constructor(e){super("date",e)}before(e){return this.addValidator({message:(t,r)=>`Expected ${r} ${t.toISOString()} to be before ${e.toISOString()}`,validator:t=>t.getTime()<e.getTime()})}after(e){return this.addValidator({message:(t,r)=>`Expected ${r} ${t.toISOString()} to be after ${e.toISOString()}`,validator:t=>t.getTime()>e.getTime()})}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});const n=r(0);t.ErrorPredicate=class extends n.Predicate{constructor(e){super("error",e)}name(e){return this.addValidator({message:(t,r)=>`Expected ${r} to have name \`${e}\`, got \`${t.name}\``,validator:t=>t.name===e})}message(e){return this.addValidator({message:(t,r)=>`Expected ${r} message to be \`${e}\`, got \`${t.message}\``,validator:t=>t.message===e})}messageIncludes(e){return this.addValidator({message:(t,r)=>`Expected ${r} message to include \`${e}\`, got \`${t.message}\``,validator:t=>t.message.includes(e)})}hasKeys(...e){return this.addValidator({message:(t,r)=>`Expected ${r} message to have keys \`${e.join("`, `")}\``,validator:t=>e.every(e=>t.hasOwnProperty(e))})}instanceOf(e){return this.addValidator({message:(t,r)=>`Expected ${r} \`${t.name}\` to be of type \`${e.name}\``,validator:t=>t instanceof e})}get typeError(){return this.instanceOf(TypeError)}get evalError(){return this.instanceOf(EvalError)}get rangeError(){return this.instanceOf(RangeError)}get referenceError(){return this.instanceOf(ReferenceError)}get syntaxError(){return this.instanceOf(SyntaxError)}get uriError(){return this.instanceOf(URIError)}}},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(5)),o=r(0),i=n(r(3)),s=n(r(7));t.MapPredicate=class extends o.Predicate{constructor(e){super("Map",e)}size(e){return this.addValidator({message:(t,r)=>`Expected ${r} to have size \`${e}\`, got \`${t.size}\``,validator:t=>t.size===e})}minSize(e){return this.addValidator({message:(t,r)=>`Expected ${r} to have a minimum size of \`${e}\`, got \`${t.size}\``,validator:t=>t.size>=e})}maxSize(e){return this.addValidator({message:(t,r)=>`Expected ${r} to have a maximum size of \`${e}\`, got \`${t.size}\``,validator:t=>t.size<=e})}hasKeys(...e){return this.addValidator({message:(e,t,r)=>`Expected ${t} to have keys \`${JSON.stringify(r)}\``,validator:t=>i.default(t,e)})}hasAnyKeys(...e){return this.addValidator({message:(t,r)=>`Expected ${r} to have any key of \`${JSON.stringify(e)}\``,validator:t=>e.some(e=>t.has(e))})}hasValues(...e){return this.addValidator({message:(e,t,r)=>`Expected ${t} to have values \`${JSON.stringify(r)}\``,validator:t=>i.default(new Set(t.values()),e)})}hasAnyValues(...e){return this.addValidator({message:(t,r)=>`Expected ${r} to have any value of \`${JSON.stringify(e)}\``,validator:t=>{const r=new Set(t.values());return e.some(e=>r.has(e))}})}keysOfType(e){return this.addValidator({message:(e,t,r)=>`(${t}) ${r}`,validator:t=>s.default(t.keys(),e)})}valuesOfType(e){return this.addValidator({message:(e,t,r)=>`(${t}) ${r}`,validator:t=>s.default(t.values(),e)})}get empty(){return this.addValidator({message:(e,t)=>`Expected ${t} to be empty, got \`${JSON.stringify(Array.from(e))}\``,validator:e=>0===e.size})}get nonEmpty(){return this.addValidator({message:(e,t)=>`Expected ${t} to not be empty`,validator:e=>e.size>0})}deepEqual(e){return this.addValidator({message:(t,r)=>`Expected ${r} to be deeply equal to \`${JSON.stringify(Array.from(e))}\`, got \`${JSON.stringify(Array.from(t))}\``,validator:t=>a.default(t,e)})}}},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(0),o=n(r(3));t.WeakMapPredicate=class extends a.Predicate{constructor(e){super("WeakMap",e)}hasKeys(...e){return this.addValidator({message:(e,t,r)=>`Expected ${t} to have keys \`${JSON.stringify(r)}\``,validator:t=>o.default(t,e)})}hasAnyKeys(...e){return this.addValidator({message:(t,r)=>`Expected ${r} to have any key of \`${JSON.stringify(e)}\``,validator:t=>e.some(e=>t.has(e))})}}},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(r(5)),o=r(0),i=n(r(3)),s=n(r(7));t.SetPredicate=class extends o.Predicate{constructor(e){super("Set",e)}size(e){return this.addValidator({message:(t,r)=>`Expected ${r} to have size \`${e}\`, got \`${t.size}\``,validator:t=>t.size===e})}minSize(e){return this.addValidator({message:(t,r)=>`Expected ${r} to have a minimum size of \`${e}\`, got \`${t.size}\``,validator:t=>t.size>=e})}maxSize(e){return this.addValidator({message:(t,r)=>`Expected ${r} to have a maximum size of \`${e}\`, got \`${t.size}\``,validator:t=>t.size<=e})}has(...e){return this.addValidator({message:(e,t,r)=>`Expected ${t} to have items \`${JSON.stringify(r)}\``,validator:t=>i.default(t,e)})}hasAny(...e){return this.addValidator({message:(t,r)=>`Expected ${r} to have any item of \`${JSON.stringify(e)}\``,validator:t=>e.some(e=>t.has(e))})}ofType(e){return this.addValidator({message:(e,t,r)=>`(${t}) ${r}`,validator:t=>s.default(t,e)})}get empty(){return this.addValidator({message:(e,t)=>`Expected ${t} to be empty, got \`${JSON.stringify(Array.from(e))}\``,validator:e=>0===e.size})}get nonEmpty(){return this.addValidator({message:(e,t)=>`Expected ${t} to not be empty`,validator:e=>e.size>0})}deepEqual(e){return this.addValidator({message:(t,r)=>`Expected ${r} to be deeply equal to \`${JSON.stringify(Array.from(e))}\`, got \`${JSON.stringify(Array.from(t))}\``,validator:t=>a.default(t,e)})}}},function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(0),o=n(r(3));t.WeakSetPredicate=class extends a.Predicate{constructor(e){super("WeakSet",e)}has(...e){return this.addValidator({message:(e,t,r)=>`Expected ${t} to have items \`${JSON.stringify(r)}\``,validator:t=>o.default(t,e)})}hasAny(...e){return this.addValidator({message:(t,r)=>`Expected ${r} to have any item of \`${JSON.stringify(e)}\``,validator:t=>e.some(e=>t.has(e))})}}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});const n=r(8),a=r(2);t.AnyPredicate=class{constructor(e,t={}){this.predicates=e,this.options=t}[a.testSymbol](e,t,r){const a=["Any predicate failed with the following errors:"];for(const n of this.predicates)try{return void t(e,r,n)}catch(t){if(void 0===e&&!0===this.options.optional)return;a.push(`- ${t.message}`)}throw new n.ArgumentError(a.join("\n"),t)}}}]);const t=e.exports;e.exports=t.default,Object.assign(e.exports,t)}),ow=unwrapExports(source),version="0.0.5",session={socket:null,connected:null,connectionId:null,networkId:null,dappId:null,transactionCallback:null},transactions=[];function Blocknative(e){return validateOptions(e),(session=_objectSpread2({},session,{},e)).socket=new SturdyWebSocket("wss://api.blocknative.com/v0"),session.socket.onmessage=handleSocketMessage,{transaction:transaction,event:event}}function transaction(e){var t=Date.now(),r=createEmitter();return transactions.push({hash:e,emitter:r}),logToServer({eventCode:"txSent",categoryCode:"activeTransaction",transaction:{hash:e,id:e}}),{details:{hash:e,timestamp:t,eventCode:"txSent"},emitter:r}}function event(e){validateEvent(e),logToServer(e)}var createEmitter=function(){return{listeners:{},on:function(e,t){if("function"!=typeof t)throw new Error("Listener must be a function");this.listeners[e]=t}}};function validateOptions(e){ow(e,"options",ow.object.exactShape({networkId:ow.number,dappId:ow.string,connectionId:ow.optional.string,transactionCallback:ow.optional.function}))}function validateEvent(e){ow(e,"event",ow.object.exactShape({eventCode:ow.string,categoryCode:ow.string}))}function handleSocketMessage(e){var t=JSON.parse(e.data),r=t.status,n=t.reason,a=t.event,o=t.connectionId;if("error"===r){if(n.includes("not a valid API key")){var i=new Error(n);throw i.eventCode="initFail",i}if(n.includes("network not supported")){var s=new Error(n);throw s.eventCode="initFail",s}}if(a&&a.transaction){var c=a.transaction,l=a.eventCode,u=_objectSpread2({},c,{eventCode:l}),d=transactions.find(function(e){return e.hash.toLowerCase()===c.hash.toLowerCase()});if(d){var f=d.emitter&&d.emitter.listeners[l]&&d.emitter.listeners[l](u);session.transactionCallback&&session.transactionCallback({transaction:u,emitterResult:f})}}o&&(session.connectionId=o)}function logToServer(e){session.socket.send(createEventLog(e))}function createEventLog(e){var t=session,r=t.dappId,n=t.networkId;return JSON.stringify(_objectSpread2({timeStamp:new Date,dappId:r,version:version,blockchain:{system:"ethereum",network:networkName(n)}},e))}function networkName(e){switch(e){case 1:return"main";case 3:return"ropsten";case 4:return"rinkeby";case 5:return"goerli";case 42:return"kovan";case"localhost":return"localhost";default:return"local"}}module.exports=Blocknative;
//# sourceMappingURL=blocknative-api.js.map
